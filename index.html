
  <!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
      <meta http-equiv="Pragma" content="no-cache" />
      <meta http-equiv="Expires" content="0" />
      <title>ChatMyte</title>
      <script>
        // Aggressive cache clearing on each load
        // BUT preserve Supabase auth tokens to keep users logged in
        (function() {
          // Clear all caches immediately
          if ('caches' in window) {
            caches.keys().then(function(names) {
              for (let name of names) {
                caches.delete(name);
              }
            });
          }

          // Preserve Supabase auth tokens when clearing storage
          try {
            // Find and preserve Supabase auth keys
            const supabaseKeys = {};
            for (let i = 0; i < localStorage.length; i++) {
              const key = localStorage.key(i);
              if (key && (key.startsWith('sb-') || key.includes('supabase') || key.includes('auth'))) {
                supabaseKeys[key] = localStorage.getItem(key);
              }
            }
            
            // Clear localStorage
            localStorage.clear();
            
            // Restore Supabase auth keys
            Object.keys(supabaseKeys).forEach(key => {
              localStorage.setItem(key, supabaseKeys[key]);
            });
            
            // DON'T clear sessionStorage - Supabase might use it
            // sessionStorage.clear(); // Commented out to preserve auth
          } catch (e) {
            console.warn('Could not clear storage:', e);
          }

          // Prevent browser from caching this page
          if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
              for(let registration of registrations) {
                registration.unregister();
              }
            });
          }
        })();
      </script>
    </head>

    <body>
      <div id="root"></div>
      <script type="module" src="/src/main.tsx"></script>
    </body>
  </html>
  